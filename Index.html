<!DOCTYPE html>
<html>
<head>
<title>Whack A Mole</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script>

window.onload = function SetupCanvas()
{

let x = 0;
let y = 0;
let whack = false;
let total = 0;
let counter = 0;

const performAnimation = () => {

 setTimeout(() => {
     request = requestAnimationFrame(performAnimation)
  },750);

   var canvas = document.getElementById("canvas");
   var layout = canvas.getContext("2d");

  layout.canvas.width  = 500;
  layout.canvas.height = 500;
  layout.clearRect(0,0,canvas.width,canvas.height);

  var imgArr = new Array("hole.png","Top.png","Up.png","Hit.png","HitEffect.png","HitEffectDown.png","Down.png");
  var PosArrY =[200,300,400];
  var PosArrX =[100,200,300];

    var img = new Image();
    img.src = imgArr[0];
    img.onload = function()
    {
      for(var x = 0; x < 3; x++)
      {
        layout.drawImage(img,PosArrX[x],PosArrY[0],75,75);
        layout.drawImage(img,PosArrX[x],PosArrY[1],75,75);
        layout.drawImage(img,PosArrX[x],PosArrY[2],75,75);
      }
    }
    for(var x = 0; x < 3; x++)
    {
      layout.drawImage(img,PosArrX[x],PosArrY[0],75,75);
      layout.drawImage(img,PosArrX[x],PosArrY[1],75,75);
      layout.drawImage(img,PosArrX[x],PosArrY[2],75,75);
    }


let pop = Math.floor(Math.random() * 9) + 1;

switch(pop)
{
  case 1:
  x = PosArrX[0];
  y = PosArrY[0];
  break;
  case 2:
  x = PosArrX[1];
  y = PosArrY[0];
  break;
  case 3:
  x = PosArrX[2];
  y = PosArrY[0];
  break;
  case 4:
  x = PosArrX[0];
  y = PosArrY[0];
  break;
  case 5:
  x = PosArrX[1];
  y = PosArrY[1];
  break;
  case 6:
  x = PosArrX[2];
  y = PosArrY[2];
  break;
  case 7:
  x = PosArrX[0];
  y = PosArrY[0];
  break;
  case 8:
  x = PosArrX[1];
  y = PosArrY[1];
  break;
  case 9:
  x = PosArrX[2];
  y = PosArrY[2];
  break;
}

counter++;

if(whack != true)
{
  if(counter % 2 === 0)
  {
    var image = new Image();
    image.src = imgArr[1];
    image.onload = function()
    {
      layout.drawImage(image,x,y,75,75);
    }
    layout.drawImage(image,x,y,75,75);
  }
  else {
    var image = new Image();
    image.src = imgArr[2];
    image.onload = function()
    {
      layout.drawImage(image,x,y,75,75);
    }
    layout.drawImage(image,x,y,75,75);
  }
}

canvas.addEventListener('click', function(event) {
  const rect = canvas.getBoundingClientRect()
  const posx = event.clientX - rect.left
  const posy = event.clientY - rect.top

  if(posx >= x && posx <= x + 75 && posy >= y && posy <= y + 75)
  {
    whack = true;
    total += 5;

    var image = new Image();
    image.src = imgArr[4];
    image.onload = function()
    {
      layout.drawImage(image,x,y,75,75);
    }
    layout.drawImage(image,x,y,75,75);
  }

}, false);

whack = false;

layout.font = "20px Times New Roman";
layout.fillText("Score",10,40);
layout.fillText(total,75,40);

}
requestAnimationFrame(performAnimation)
}
</script>
<style>
html, body {
  overflow: hidden;
}
#canvas
{
 width:500px;
 height:500px;
 margin:0px auto;
 border:2px solid black;
 position:absolute;
 left:400px;
 top:50px;
 background-image: url("background.png");
}
</style>
</head>
<body>
<canvas id="canvas" width="500px" height="500px">
</canvas>
</body>
</html>
